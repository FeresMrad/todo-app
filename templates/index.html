{% extends "base.html" %}

{% block content %}
<h1>My Todo List</h1>

<form method="POST" action="/add" id="add-form">
    <div class="form-group">
        <label for="task">New Task:</label>
        <input type="text" id="task" name="task" placeholder="Enter your task here..." required maxlength="200">
    </div>

    <div class="form-group">
        <label for="priority">Priority:</label>
        <select id="priority" name="priority">
            <option value="low">Low</option>
            <option value="medium" selected>Medium</option>
            <option value="high">High</option>
        </select>
    </div>

    <button type="submit" class="btn" id="add-btn">Add Task</button>
</form>

<hr style="margin: 30px 0;">

{% if todos %}
<h2>Tasks ({{ todos|length }})</h2>
{% for todo in todos %}
<div class="todo-item {% if todo.completed %}completed{% endif %}" data-id="{{ todo.id }}">
    <div class="todo-text {% if todo.completed %}completed{% endif %}">
        <span class="priority priority-{{ todo.priority }}">{{ todo.priority.upper() }}</span>
        {{ todo.task }}
    </div>
    <div class="todo-actions">
        <a href="/toggle/{{ todo.id }}" class="btn {% if todo.completed %}btn-secondary{% else %}btn{% endif %}"
            id="toggle-{{ todo.id }}">
            {% if todo.completed %}Undo{% else %}Complete{% endif %}
        </a>
        <a href="/edit/{{ todo.id }}" class="btn btn-secondary" id="edit-{{ todo.id }}">Edit</a>
        <a href="/delete/{{ todo.id }}" class="btn btn-danger" id="delete-{{ todo.id }}"
            onclick="return confirm('Are you sure you want to delete this task?')">Delete</a>
    </div>
</div>
{% endfor %}
{% else %}
<div class="empty-state">
    <h3>No tasks yet!</h3>
    <p>Add your first task above to get started.</p>
</div>
{% endif %}
{% endblock %}